<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏—Å—Ç–µ–º–∞ –û—Ü–µ–Ω–∫–∏ –ö–∞—á–µ—Å—Ç–≤–∞ –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
    <!-- –ë–ª–æ–∫ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã -->
    <div id="themeContainer">
        <i id="themeToggle" class="fas fa-sun" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É"></i>
        <span id="themeText"></span>
    </div>

<!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—Ö–æ–¥–∞ -->
<div class="login-container" id="loginContainer">
    <img src="https://i.pinimg.com/736x/77/ec/d3/77ecd33979c0c8a3299efcf9620cbad4.jpg" 
         alt="–õ–æ–≥–æ—Ç–∏–ø" class="logo" />

    <h1>–°–∏—Å—Ç–µ–º–∞ –û—Ü–µ–Ω–∫–∏ –ö–∞—á–µ—Å—Ç–≤–∞ –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è</h1>

    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ —Å–µ—Ä–≤–µ—Ä–∞ -->
    <div class="server-error" id="serverError" style="display:none;"></div>

    <div class="form-container">
       <form id="loginForm" novalidate>
            <!-- –õ–æ–≥–∏–Ω -->
            <div class="input-group">
                <label for="username">
                    <i class="fas fa-user"></i> –õ–æ–≥–∏–Ω:
                </label>
                <input type="text" id="username" name="username" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ª–æ–≥–∏–Ω" required aria-label="–õ–æ–≥–∏–Ω">
                <div class="error-message" id="usernameError" style="display:none;">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ª–æ–≥–∏–Ω.</div>
            </div>

            <!-- –ü–∞—Ä–æ–ª—å -->
            <div class="input-group">
                <label for="password">
                    <i class="fas fa-lock"></i> –ü–∞—Ä–æ–ª—å:
                </label>
                <div class="password-container">
                    <input type="password" id="password" name="password" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ø–∞—Ä–æ–ª—å" required aria-label="–ü–∞—Ä–æ–ª—å">
                    <span class="toggle-password" id="togglePassword" title="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å">
                        <i class="fas fa-eye"></i>
                    </span>
                </div>
                <div class="error-message" id="passwordError" style="display:none;">–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤.</div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ –≤—Ö–æ–¥–∞ -->
            <button type="submit" class="login-btn">
                <i class="fas fa-sign-in-alt"></i> –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
            </button>

            <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ -->
            <div class="success-message" id="successMessage" style="display:none;">
                <i class="fas fa-check-circle"></i> –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ! –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º...
            </div>
        </form>
    </div>
</div>

<!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
<div class="dashboard-container" id="dashboardContainer" style="display: none;">
    <div class="dashboard-header">
        <div class="user-info">
            <div class="user-name" id="userName">
                –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤ <span class="role-tag student-tag" id="userRoleTag">–£—á–µ–Ω–∏–∫</span>
            </div>
            <div class="user-role" id="userRoleDetails">–®–∫–æ–ª–∞ ‚Ññ15, 10-–ê –∫–ª–∞—Å—Å, –≥. –ú–æ—Å–∫–≤–∞</div>
        </div>
        <button class="logout-btn" id="logoutBtn">
            <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
        </button>
    </div>
    
    <div class="dashboard-content">
        <h2 class="section-title">
            <i class="fas fa-tachometer-alt"></i> –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        </h2>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon" style="color: var(--student);">
                    <i class="fas fa-user-graduate"></i>
                </div>
                <div class="stat-value" id="statStudents">0</div>
                <div class="stat-label">–£—á–µ–Ω–∏–∫–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon" style="color: var(--teacher);">
                    <i class="fas fa-chalkboard-teacher"></i>
                </div>
                <div class="stat-value" id="statTeachers">0</div>
                <div class="stat-label">–£—á–∏—Ç–µ–ª–µ–π –≤ —Å–∏—Å—Ç–µ–º–µ</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon" style="color: var(--school);">
                    <i class="fas fa-school"></i>
                </div>
                <div class="stat-value" id="statSchools">0</div>
                <div class="stat-label">–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —É—á—Ä–µ–∂–¥–µ–Ω–∏–π</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon" style="color: var(--accent);">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="stat-value" id="statRating">0</div>
                <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞</div>
            </div>
        </div>
        
        <div class="role-specific" id="roleSpecificContent">
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–æ–ª–∏ -->
        </div>
        
        <div class="hierarchy">
            <h3 class="hierarchy-title">
                <i class="fas fa-sitemap"></i> –ò–µ—Ä–∞—Ä—Ö–∏—è —Å–∏—Å—Ç–µ–º—ã –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
            </h3>
            <div class="org-structure">
                <div class="org-level">
                    <div class="org-item">
                        <div class="org-name">–ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è</div>
                        <div class="org-role">–§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å</div>
                    </div>
                </div>
                
                <div class="org-level">
                    <div class="org-item">
                        <div class="org-name">–î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è</div>
                        <div class="org-role">–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å</div>
                    </div>
                </div>
                
                <div class="org-level">
                    <div class="org-item">
                        <div class="org-name" id="userSchool">–®–∫–æ–ª–∞ ‚Ññ15</div>
                        <div class="org-role" id="userRolePosition">–£—á–µ–±–Ω–æ–µ –∑–∞–≤–µ–¥–µ–Ω–∏–µ</div>
                    </div>
                </div>
                
                <div class="org-level">
                    <div class="org-item">
                        <div class="org-name" id="userClass">10-–ê –∫–ª–∞—Å—Å</div>
                        <div class="org-role" id="userPosition">–£—á–µ–Ω–∏–∫</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.getElementById('loginForm').addEventListener('submit', async function(event) {
  event.preventDefault();

  const login = document.getElementById('username').value.trim();
  const password = document.getElementById('password').value.trim();

  try {
    const response = await fetch("https://raw.githubusercontent.com/AiSytculs/jsons/main/users.json"); // –û–±–Ω–æ–≤–∏ —Å—Å—ã–ª–∫—É –Ω–∞ —Å–≤–æ—é
    if (!response.ok) throw new Error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ JSON");

    const users = await response.json();
    const user = users.find(u => u.login === login && u.password === password);

    if (user) {
      localStorage.setItem('currentUser', JSON.stringify(user));
      document.getElementById('loginContainer').style.display = 'none';
      document.getElementById('dashboardContainer').style.display = 'block';
      showUserDashboard(user);
    } else {
      document.getElementById('serverError').style.display = 'block';
      document.getElementById('serverError').textContent = '–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å.';
    }

  } catch (err) {
    document.getElementById('serverError').style.display = 'block';
    document.getElementById('serverError').textContent = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö.';
    console.error("Fetch error:", err);
  }
});

function showUserDashboard(user) {
  document.getElementById('userName').innerHTML = `${user.name} <span class="role-tag" id="userRoleTag">${getRoleLabel(user.role)}</span>`;
  document.getElementById('userRoleDetails').textContent =
    user.role === "student" ? `${user.school}, ${user.className} –∫–ª–∞—Å—Å` :
    user.role === "teacher" ? `${user.subject}, ${user.experience}` :
    user.role === "school" ? `${user.name}` : "";

  const roleContent = document.getElementById('roleSpecificContent');
  roleContent.innerHTML = "";

  switch (user.role) {
    case "student":
      roleContent.innerHTML = `
        <h3>üìö –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${user.name}!</h3>
        <p>–í–∞—à —Ä–µ–π—Ç–∏–Ω–≥: ${user.rating}</p>
        <p>–ö–ª–∞—Å—Å: ${user.className}</p>
        <p>–®–∫–æ–ª–∞: ${user.school}</p>
      `;
      break;
    // ‚ûï –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∏–µ —Ä–æ–ª–∏ —Ç—É—Ç
  }

  if (user.role === "super_admin") {
    window.location.href = "test.html";
  }
}

function getRoleLabel(role) {
  switch (role) {
    case "student": return "–£—á–µ–Ω–∏–∫";
    case "teacher": return "–£—á–∏—Ç–µ–ª—å";
    case "school": return "–®–∫–æ–ª–∞";
    case "admin": return "–ê–¥–º–∏–Ω";
    case "super_admin": return "–°—É–ø–µ—Ä-–ê–¥–º–∏–Ω";
    case "ministry": return "–ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–æ";
    default: return "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å";
  }
}
</script>

<script src="script.js"></script>
<script src="locolhost.js"></script>
<!-- –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ –≤–µ—Å—å JS-–∫–æ–¥ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π <script> —Ç–µ–≥ -->
</body>
</html>
